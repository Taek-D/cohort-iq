# CohortIQ 분석 방법론

이 문서는 CohortIQ에서 사용하는 분석 알고리즘, 임계값의 근거, 그리고 업계 벤치마크와의 비교를 설명합니다.

---

## 1. 코호트 리텐션 분석

### 1-1. 코호트 정의

- **단위**: 주간(Weekly) 코호트
- **기준일**: 월요일 (ISO 8601 주 시작일)
- **그룹화 방식**: `signup_date`를 해당 주의 월요일로 정규화
- **구현**: `cohortAnalysis.js` — `startOfWeek(signup_date, { weekStartsOn: 1 })`

### 1-2. 왜 Weekly 코호트인가?

| 비교 항목 | Daily | **Weekly (선택)** | Monthly |
|-----------|-------|-------------------|---------|
| 피드백 루프 | 너무 잦음 | **1주 단위 패턴 포착** | 느림 |
| 코호트 크기 | 작음 (노이즈) | **적정** | 큼 (세부 패턴 소실) |
| SaaS 활용도 | 이벤트 분석 | **리텐션 분석 표준** | 분기 리포트 |

SaaS 제품의 리텐션 분석에서 주간 코호트는 가장 널리 사용되는 단위입니다. 일간은 노이즈가 심하고, 월간은 변화 감지가 느립니다. 주간 단위는 온보딩 개선 A/B 테스트, 기능 출시 효과 측정 등 빠른 피드백 루프에 최적화되어 있습니다.

### 1-3. 리텐션율 계산

```
리텐션율(%) = (Week N 활성 사용자 수 / Week 0 코호트 크기) × 100
```

- **Week 0**: 해당 코호트에 속한 전체 가입자 수 (= 100%)
- **Week N**: 가입일로부터 N주 후에 활동(이벤트)이 있는 고유 사용자 수
- **활동 판정**: `event_date`가 코호트 시작일로부터 `N × 7일 ~ (N+1) × 7일 - 1일` 범위에 포함
- **구현**: `cohortAnalysis.js` — `differenceInWeeks(event_date, cohortDate, { weekStartsOn: 1 })`

---

## 2. Churn Risk 스코어링

활동 패턴 기반 위험 스코어를 산출하여 사용자를 4단계로 분류합니다.

### 2-1. 스코어 구성 요소

| 요소 | 배점 | 측정 대상 |
|------|------|-----------|
| **Recency** | 0–40점 | 마지막 활동 이후 경과 시간 |
| **Frequency** | 0–30점 | 활동 밀도 (활동 주차 / 총 경과 주차) |
| **Consistency** | 0–30점 | 연속 미활동 주차 수 |
| **합계** | **0–100점** | |

### 2-2. 세부 스코어링 기준

**Recency (0–40점)** — `churnAnalysis.js:107–110`

| 마지막 활동 경과 | 점수 | 근거 |
|-----------------|------|------|
| 4주 이상 | +40 | SaaS에서 28일 비활동은 사실상 이탈 |
| 3주 | +30 | 이탈 경고 구간 |
| 2주 | +20 | 위험 시작 |
| 1주 | +10 | 모니터링 필요 |

**Frequency (0–30점)** — `churnAnalysis.js:113–115`

| 활동 밀도 | 점수 | 근거 |
|-----------|------|------|
| 25% 미만 | +30 | 제품 가치를 인식하지 못한 사용자 |
| 25–49% | +20 | 간헐적 사용자 |
| 50–74% | +10 | 정상 범위 하한 |
| 75% 이상 | +0 | 건강한 활동 패턴 |

**Consistency (0–30점)** — `churnAnalysis.js:118–120`

| 연속 미활동 주차 | 점수 | 근거 |
|-----------------|------|------|
| 4주 이상 | +30 | 습관 형성 완전 실패 |
| 3주 | +20 | 습관 이탈 |
| 2주 | +10 | 주의 필요 |
| 0–1주 | +0 | 정상 |

### 2-3. 가중치 근거

**Recency 40% — 가장 높은 가중치**

Recency는 이탈 예측에서 가장 강력한 단일 지표입니다:

- **Fader & Hardie (2009)**: BG/NBD 확률 모델에서 Recency가 고객 이탈 예측의 핵심 파라미터. 최근 구매/활동 시점이 미래 활동 확률을 가장 강하게 결정함
- **SaaS 업계 관행**: Mixpanel 2023 Product Benchmarks에서 "14일 비활동 사용자의 60% 이상이 30일 이내 완전 이탈"로 보고
- **실무적 의미**: 최근 활동 여부는 즉각적인 재참여 캠페인 실행 여부를 결정하는 가장 actionable한 지표

**Frequency 30%**

- 활동 밀도가 낮은 사용자는 제품의 핵심 가치(Aha Moment)에 도달하지 못했을 가능성이 높음
- Amplitude 2024 Retention Report: "Week 1 내 3회 이상 핵심 행동을 한 사용자는 D30 리텐션이 2.5배 높음"

**Consistency 30%**

- 연속 미활동은 단순 빈도보다 심각한 시그널. 간헐적으로라도 돌아오는 사용자와 완전히 떠난 사용자를 구분
- 습관 형성 이론(Nir Eyal, *Hooked*): 제품 사용 습관이 형성되지 않으면 외부 트리거 없이 자발적 복귀 확률이 급감

### 2-4. 임계값 근거

| 위험 레벨 | 스코어 | 의미 | 근거 |
|----------|--------|------|------|
| **CRITICAL** | ≥70 | 즉시 조치 필요 | Recency 4주+(40) + Frequency/Consistency 중 1개 이상 최대(30) = 70. 복합 위험 요인이 동시에 존재 |
| **HIGH** | 50–69 | 높은 이탈 위험 | 2개 이상 지표에서 중간~높은 위험. 선제적 개입 필요 |
| **MEDIUM** | 30–49 | 모니터링 필요 | 1개 지표만 경미한 위험. 추세 관찰 |
| **LOW** | <30 | 건강 | 모든 지표 양호. 현재 전략 유지 |

**구현**: `churnAnalysis.js:124–127`

### 2-5. 업계 벤치마크 비교

CohortIQ의 스코어링 임계값이 업계 평균과 어떻게 대응되는지:

| 메트릭 | 업계 평균 (SaaS) | 상위 25% | 출처 |
|--------|------------------|----------|------|
| D7 리텐션 | 40–60% | 70%+ | Mixpanel 2023 Product Benchmarks |
| D30 리텐션 | 20–35% | 40%+ | Mixpanel 2023 Product Benchmarks |
| D90 리텐션 | 15–25% | 30%+ | Amplitude 2024 Retention Report |
| Monthly Churn Rate | 3–7% | <3% | ProfitWell SaaS Index |
| 28일 비활동 이탈률 | 60%+ | — | Mixpanel 2023 |

CohortIQ의 CRITICAL 임계값(≥70점)은 "4주 이상 비활동 + 낮은 활동 밀도"에 해당하며, 이는 업계 데이터에서 이탈 확률 60% 이상인 구간과 일치합니다.

---

## 3. 건강도 점수 (Health Score)

코호트 리텐션과 Churn Risk를 종합한 단일 점수입니다.

### 3-1. 계산 공식

```
Health Score = Retention Score + Churn Score (0–100)

Retention Score = min(50, (Week 4 평균 리텐션 / 80) × 50)
Churn Score     = min(50, (Low Risk 사용자 비율 / 60) × 50)
```

**구현**: `summaryGenerator.js:109–120`

### 3-2. 기준값 근거

| 기준 | 값 | 근거 |
|------|------|------|
| Retention 기준 (80%) | Week 4 리텐션 80% = 만점(50점) | SaaS 상위 10%의 D28 리텐션. 도달하기 어렵지만 이상적인 목표 |
| Churn 기준 (60%) | Low Risk 비율 60% = 만점(50점) | 건강한 서비스에서 과반수 이상이 저위험이어야 함 |

### 3-3. 등급 분류

| 등급 | 점수 | 의미 | 해석 |
|------|------|------|------|
| **A** | ≥80 | 우수 | 높은 리텐션 + 낮은 이탈 위험. 성장에 집중 |
| **B** | 60–79 | 양호 | 양호하나 개선 여지 있음. 특정 코호트 집중 관리 |
| **C** | 40–59 | 주의 | 리텐션 또는 이탈 위험 중 하나 이상 문제. 온보딩 개선 필요 |
| **D** | <40 | 위험 | 즉각적인 제품/운영 개선 필요. 이탈 방지가 최우선 |

**구현**: `summaryGenerator.js:125–130`

---

## 4. 방법론의 한계

투명성을 위해 현재 방법론의 한계를 명시합니다:

### 측정 한계
- **이벤트 유형 미구분**: 로그인, 핵심 기능 사용, 설정 변경 등 이벤트의 질적 차이를 반영하지 않음
- **이벤트 빈도만 측정**: 세션 시간, 사용 깊이(depth) 등 참여도 지표 미반영
- **단일 이벤트 = 활성**: Week N에 1회라도 이벤트가 있으면 "활성"으로 판정. 실제 서비스에서는 최소 N회 이상 핵심 행동을 "진정한 활성"으로 정의하는 것이 일반적

### 통계적 한계
- **유의성 검정 미적용**: 코호트 간 리텐션 차이가 통계적으로 유의한지 검증하지 않음 (카이제곱, Fisher's exact test 등)
- **신뢰구간 미표시**: 코호트 크기가 작을 경우 리텐션율의 변동성이 크지만, 이를 반영하지 않음
- **인과관계 미추론**: 리텐션 차이의 원인(마케팅 채널, 시즌, 제품 변경 등)을 식별하지 않음

### 데이터 한계
- **매출 데이터 미연동**: LTV(고객 생애 가치) 추정 불가
- **외부 요인 미반영**: 마케팅 캠페인, 시즌 효과, 경쟁사 동향 등
- **코호트 크기 불균형**: 주간 가입자 수 변동이 크면 리텐션율 비교의 신뢰성 감소

---

## 5. 향후 개선 방향

| 개선 항목 | 설명 | 우선순위 |
|-----------|------|----------|
| **BG/NBD 모델** | 확률적 이탈 예측 (Fader & Hardie, 2005). 각 사용자의 "살아있을 확률"을 산출 | P0 |
| **Gamma-Gamma 모델** | 매출 데이터 연동 시 기대 LTV 추정 | P1 |
| **코호트 간 통계 검정** | 카이제곱 검정으로 리텐션 차이 유의성 판별 | P1 |
| **Monthly 코호트 옵션** | 주간 외 월간 코호트 지원 | P2 |
| **이벤트 유형 필터** | 핵심 행동만 선별하여 "진정한 리텐션" 측정 | P2 |
| **신뢰구간 표시** | 코호트 크기 기반 Wilson score interval | P2 |

---

## 참고 문헌

1. Fader, P. S., & Hardie, B. G. S. (2009). "Probability Models for Customer-Base Analysis." *Journal of Interactive Marketing*, 23(1), 61-69.
2. Fader, P. S., Hardie, B. G. S., & Lee, K. L. (2005). "'Counting Your Customers' the Easy Way: An Alternative to the Pareto/NBD Model." *Marketing Science*, 24(2), 275-284.
3. Mixpanel. (2023). *Product Benchmarks Report*. [mixpanel.com/blog/product-benchmarks](https://mixpanel.com/blog)
4. Amplitude. (2024). *Product Analytics Benchmarks Report*. [amplitude.com/blog](https://amplitude.com/blog)
5. Eyal, N. (2014). *Hooked: How to Build Habit-Forming Products*. Portfolio/Penguin.
